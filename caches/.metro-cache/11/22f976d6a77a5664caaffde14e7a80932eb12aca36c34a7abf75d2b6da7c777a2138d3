{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"]}},{"name":"react-native-web/dist/exports/Alert","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"PEUC6jrQVoAGZ2qYkvimljMOyJI=","exportNames":["*"]}},{"name":"expo-location","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":38},"end":{"line":2,"column":42,"index":80}}],"key":"GNP7AGCKsBRUhlnTZ4lIPpbkT9E=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.useVisitActions = useVisitActions;\n  var _Alert = _interopRequireDefault(require(_dependencyMap[1], \"react-native-web/dist/exports/Alert\"));\n  var Location = _interopRequireWildcard(require(_dependencyMap[2], \"expo-location\"));\n  function _interopRequireWildcard(e, t) { if (\"function\" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function (e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || \"object\" != typeof e && \"function\" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (const t in e) \"default\" !== t && {}.hasOwnProperty.call(e, t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, t)) && (i.get || i.set) ? o(f, t, i) : f[t] = e[t]); return f; })(e, t); }\n  function useVisitActions() {\n    const requestLocationPermission = async () => {\n      try {\n        const {\n          status\n        } = await Location.requestForegroundPermissionsAsync();\n        if (status === 'granted') {\n          const currentLocation = await Location.getCurrentPositionAsync({});\n          return currentLocation.coords;\n        } else {\n          _Alert.default.alert('Permission denied', 'Location permission is required for visit reports');\n          return null;\n        }\n      } catch (error) {\n        console.error('Error getting location:', error);\n        _Alert.default.alert('Error', 'Failed to get current location');\n        return null;\n      }\n    };\n    const takePicture = async (cameraRef, location, setLocation, setCapturedPhoto) => {\n      if (!cameraRef.current) return;\n      try {\n        const photo = await cameraRef.current.takePictureAsync({\n          quality: 0.8,\n          base64: false\n        });\n        setCapturedPhoto(photo);\n\n        // Get location when taking photo\n        if (!location) {\n          const coords = await requestLocationPermission();\n          if (coords) {\n            setLocation(coords);\n          }\n        }\n      } catch (error) {\n        console.error('Error taking picture:', error);\n        _Alert.default.alert('Error', 'Failed to take picture');\n      }\n    };\n    const savePayment = async (debtorId, paymentAmount, paymentMethod, paymentNotes) => {\n      if (!paymentAmount || parseFloat(paymentAmount) <= 0) {\n        _Alert.default.alert('Error', 'Please enter a valid payment amount');\n        return false;\n      }\n      try {\n        const response = await fetch('/api/payment-history', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            debtor_id: debtorId,\n            amount: parseFloat(paymentAmount),\n            payment_date: new Date().toISOString().split('T')[0],\n            payment_method: paymentMethod,\n            notes: paymentNotes,\n            recorded_by: 'field_officer'\n          })\n        });\n        if (!response.ok) throw new Error('Failed to save payment');\n        _Alert.default.alert('Success', 'Payment recorded successfully');\n        return true;\n      } catch (error) {\n        console.error('Error saving payment:', error);\n        _Alert.default.alert('Error', 'Failed to save payment');\n        return false;\n      }\n    };\n    const saveVisitReport = async visitData => {\n      try {\n        const response = await fetch('/api/visit-reports', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(visitData)\n        });\n        if (!response.ok) throw new Error('Failed to save visit report');\n        return true;\n      } catch (error) {\n        console.error('Error saving visit report:', error);\n        _Alert.default.alert('Error', 'Failed to save visit report');\n        return false;\n      }\n    };\n    return {\n      requestLocationPermission,\n      takePicture,\n      savePayment,\n      saveVisitReport\n    };\n  }\n});","lineCount":103,"map":[[8,2,2,0],[8,6,2,0,"Location"],[8,14,2,0],[8,17,2,0,"_interopRequireWildcard"],[8,40,2,0],[8,41,2,0,"require"],[8,48,2,0],[8,49,2,0,"_dependencyMap"],[8,63,2,0],[9,2,2,42],[9,11,2,42,"_interopRequireWildcard"],[9,35,2,42,"e"],[9,36,2,42],[9,38,2,42,"t"],[9,39,2,42],[9,68,2,42,"WeakMap"],[9,75,2,42],[9,81,2,42,"r"],[9,82,2,42],[9,89,2,42,"WeakMap"],[9,96,2,42],[9,100,2,42,"n"],[9,101,2,42],[9,108,2,42,"WeakMap"],[9,115,2,42],[9,127,2,42,"_interopRequireWildcard"],[9,150,2,42],[9,162,2,42,"_interopRequireWildcard"],[9,163,2,42,"e"],[9,164,2,42],[9,166,2,42,"t"],[9,167,2,42],[9,176,2,42,"t"],[9,177,2,42],[9,181,2,42,"e"],[9,182,2,42],[9,186,2,42,"e"],[9,187,2,42],[9,188,2,42,"__esModule"],[9,198,2,42],[9,207,2,42,"e"],[9,208,2,42],[9,214,2,42,"o"],[9,215,2,42],[9,217,2,42,"i"],[9,218,2,42],[9,220,2,42,"f"],[9,221,2,42],[9,226,2,42,"__proto__"],[9,235,2,42],[9,243,2,42,"default"],[9,250,2,42],[9,252,2,42,"e"],[9,253,2,42],[9,270,2,42,"e"],[9,271,2,42],[9,294,2,42,"e"],[9,295,2,42],[9,320,2,42,"e"],[9,321,2,42],[9,330,2,42,"f"],[9,331,2,42],[9,337,2,42,"o"],[9,338,2,42],[9,341,2,42,"t"],[9,342,2,42],[9,345,2,42,"n"],[9,346,2,42],[9,349,2,42,"r"],[9,350,2,42],[9,358,2,42,"o"],[9,359,2,42],[9,360,2,42,"has"],[9,363,2,42],[9,364,2,42,"e"],[9,365,2,42],[9,375,2,42,"o"],[9,376,2,42],[9,377,2,42,"get"],[9,380,2,42],[9,381,2,42,"e"],[9,382,2,42],[9,385,2,42,"o"],[9,386,2,42],[9,387,2,42,"set"],[9,390,2,42],[9,391,2,42,"e"],[9,392,2,42],[9,394,2,42,"f"],[9,395,2,42],[9,411,2,42,"t"],[9,412,2,42],[9,416,2,42,"e"],[9,417,2,42],[9,433,2,42,"t"],[9,434,2,42],[9,441,2,42,"hasOwnProperty"],[9,455,2,42],[9,456,2,42,"call"],[9,460,2,42],[9,461,2,42,"e"],[9,462,2,42],[9,464,2,42,"t"],[9,465,2,42],[9,472,2,42,"i"],[9,473,2,42],[9,477,2,42,"o"],[9,478,2,42],[9,481,2,42,"Object"],[9,487,2,42],[9,488,2,42,"defineProperty"],[9,502,2,42],[9,507,2,42,"Object"],[9,513,2,42],[9,514,2,42,"getOwnPropertyDescriptor"],[9,538,2,42],[9,539,2,42,"e"],[9,540,2,42],[9,542,2,42,"t"],[9,543,2,42],[9,550,2,42,"i"],[9,551,2,42],[9,552,2,42,"get"],[9,555,2,42],[9,559,2,42,"i"],[9,560,2,42],[9,561,2,42,"set"],[9,564,2,42],[9,568,2,42,"o"],[9,569,2,42],[9,570,2,42,"f"],[9,571,2,42],[9,573,2,42,"t"],[9,574,2,42],[9,576,2,42,"i"],[9,577,2,42],[9,581,2,42,"f"],[9,582,2,42],[9,583,2,42,"t"],[9,584,2,42],[9,588,2,42,"e"],[9,589,2,42],[9,590,2,42,"t"],[9,591,2,42],[9,602,2,42,"f"],[9,603,2,42],[9,608,2,42,"e"],[9,609,2,42],[9,611,2,42,"t"],[9,612,2,42],[10,2,4,7],[10,11,4,16,"useVisitActions"],[10,26,4,31,"useVisitActions"],[10,27,4,31],[10,29,4,34],[11,4,5,2],[11,10,5,8,"requestLocationPermission"],[11,35,5,33],[11,38,5,36],[11,44,5,36,"requestLocationPermission"],[11,45,5,36],[11,50,5,48],[12,6,6,4],[12,10,6,8],[13,8,7,6],[13,14,7,12],[14,10,7,14,"status"],[15,8,7,21],[15,9,7,22],[15,12,7,25],[15,18,7,31,"Location"],[15,26,7,39],[15,27,7,40,"requestForegroundPermissionsAsync"],[15,60,7,73],[15,61,7,74],[15,62,7,75],[16,8,8,6],[16,12,8,10,"status"],[16,18,8,16],[16,23,8,21],[16,32,8,30],[16,34,8,32],[17,10,9,8],[17,16,9,14,"currentLocation"],[17,31,9,29],[17,34,9,32],[17,40,9,38,"Location"],[17,48,9,46],[17,49,9,47,"getCurrentPositionAsync"],[17,72,9,70],[17,73,9,71],[17,74,9,72],[17,75,9,73],[17,76,9,74],[18,10,10,8],[18,17,10,15,"currentLocation"],[18,32,10,30],[18,33,10,31,"coords"],[18,39,10,37],[19,8,11,6],[19,9,11,7],[19,15,11,13],[20,10,12,8,"Alert"],[20,24,12,13],[20,25,12,14,"alert"],[20,30,12,19],[20,31,13,10],[20,50,13,29],[20,52,14,10],[20,103,15,8],[20,104,15,9],[21,10,16,8],[21,17,16,15],[21,21,16,19],[22,8,17,6],[23,6,18,4],[23,7,18,5],[23,8,18,6],[23,15,18,13,"error"],[23,20,18,18],[23,22,18,20],[24,8,19,6,"console"],[24,15,19,13],[24,16,19,14,"error"],[24,21,19,19],[24,22,19,20],[24,47,19,45],[24,49,19,47,"error"],[24,54,19,52],[24,55,19,53],[25,8,20,6,"Alert"],[25,22,20,11],[25,23,20,12,"alert"],[25,28,20,17],[25,29,20,18],[25,36,20,25],[25,38,20,27],[25,70,20,59],[25,71,20,60],[26,8,21,6],[26,15,21,13],[26,19,21,17],[27,6,22,4],[28,4,23,2],[28,5,23,3],[29,4,25,2],[29,10,25,8,"takePicture"],[29,21,25,19],[29,24,25,22],[29,30,25,22,"takePicture"],[29,31,25,29,"cameraRef"],[29,40,25,38],[29,42,25,40,"location"],[29,50,25,48],[29,52,25,50,"setLocation"],[29,63,25,61],[29,65,25,63,"setCapturedPhoto"],[29,81,25,79],[29,86,25,84],[30,6,26,4],[30,10,26,8],[30,11,26,9,"cameraRef"],[30,20,26,18],[30,21,26,19,"current"],[30,28,26,26],[30,30,26,28],[31,6,28,4],[31,10,28,8],[32,8,29,6],[32,14,29,12,"photo"],[32,19,29,17],[32,22,29,20],[32,28,29,26,"cameraRef"],[32,37,29,35],[32,38,29,36,"current"],[32,45,29,43],[32,46,29,44,"takePictureAsync"],[32,62,29,60],[32,63,29,61],[33,10,30,8,"quality"],[33,17,30,15],[33,19,30,17],[33,22,30,20],[34,10,31,8,"base64"],[34,16,31,14],[34,18,31,16],[35,8,32,6],[35,9,32,7],[35,10,32,8],[36,8,33,6,"setCapturedPhoto"],[36,24,33,22],[36,25,33,23,"photo"],[36,30,33,28],[36,31,33,29],[38,8,35,6],[39,8,36,6],[39,12,36,10],[39,13,36,11,"location"],[39,21,36,19],[39,23,36,21],[40,10,37,8],[40,16,37,14,"coords"],[40,22,37,20],[40,25,37,23],[40,31,37,29,"requestLocationPermission"],[40,56,37,54],[40,57,37,55],[40,58,37,56],[41,10,38,8],[41,14,38,12,"coords"],[41,20,38,18],[41,22,38,20],[42,12,39,10,"setLocation"],[42,23,39,21],[42,24,39,22,"coords"],[42,30,39,28],[42,31,39,29],[43,10,40,8],[44,8,41,6],[45,6,42,4],[45,7,42,5],[45,8,42,6],[45,15,42,13,"error"],[45,20,42,18],[45,22,42,20],[46,8,43,6,"console"],[46,15,43,13],[46,16,43,14,"error"],[46,21,43,19],[46,22,43,20],[46,45,43,43],[46,47,43,45,"error"],[46,52,43,50],[46,53,43,51],[47,8,44,6,"Alert"],[47,22,44,11],[47,23,44,12,"alert"],[47,28,44,17],[47,29,44,18],[47,36,44,25],[47,38,44,27],[47,62,44,51],[47,63,44,52],[48,6,45,4],[49,4,46,2],[49,5,46,3],[50,4,48,2],[50,10,48,8,"savePayment"],[50,21,48,19],[50,24,48,22],[50,30,48,22,"savePayment"],[50,31,48,29,"debtorId"],[50,39,48,37],[50,41,48,39,"paymentAmount"],[50,54,48,52],[50,56,48,54,"paymentMethod"],[50,69,48,67],[50,71,48,69,"paymentNotes"],[50,83,48,81],[50,88,48,86],[51,6,49,4],[51,10,49,8],[51,11,49,9,"paymentAmount"],[51,24,49,22],[51,28,49,26,"parseFloat"],[51,38,49,36],[51,39,49,37,"paymentAmount"],[51,52,49,50],[51,53,49,51],[51,57,49,55],[51,58,49,56],[51,60,49,58],[52,8,50,6,"Alert"],[52,22,50,11],[52,23,50,12,"alert"],[52,28,50,17],[52,29,50,18],[52,36,50,25],[52,38,50,27],[52,75,50,64],[52,76,50,65],[53,8,51,6],[53,15,51,13],[53,20,51,18],[54,6,52,4],[55,6,54,4],[55,10,54,8],[56,8,55,6],[56,14,55,12,"response"],[56,22,55,20],[56,25,55,23],[56,31,55,29,"fetch"],[56,36,55,34],[56,37,55,35],[56,59,55,57],[56,61,55,59],[57,10,56,8,"method"],[57,16,56,14],[57,18,56,16],[57,24,56,22],[58,10,57,8,"headers"],[58,17,57,15],[58,19,57,17],[59,12,57,19],[59,26,57,33],[59,28,57,35],[60,10,57,54],[60,11,57,55],[61,10,58,8,"body"],[61,14,58,12],[61,16,58,14,"JSON"],[61,20,58,18],[61,21,58,19,"stringify"],[61,30,58,28],[61,31,58,29],[62,12,59,10,"debtor_id"],[62,21,59,19],[62,23,59,21,"debtorId"],[62,31,59,29],[63,12,60,10,"amount"],[63,18,60,16],[63,20,60,18,"parseFloat"],[63,30,60,28],[63,31,60,29,"paymentAmount"],[63,44,60,42],[63,45,60,43],[64,12,61,10,"payment_date"],[64,24,61,22],[64,26,61,24],[64,30,61,28,"Date"],[64,34,61,32],[64,35,61,33],[64,36,61,34],[64,37,61,35,"toISOString"],[64,48,61,46],[64,49,61,47],[64,50,61,48],[64,51,61,49,"split"],[64,56,61,54],[64,57,61,55],[64,60,61,58],[64,61,61,59],[64,62,61,60],[64,63,61,61],[64,64,61,62],[65,12,62,10,"payment_method"],[65,26,62,24],[65,28,62,26,"paymentMethod"],[65,41,62,39],[66,12,63,10,"notes"],[66,17,63,15],[66,19,63,17,"paymentNotes"],[66,31,63,29],[67,12,64,10,"recorded_by"],[67,23,64,21],[67,25,64,23],[68,10,65,8],[68,11,65,9],[69,8,66,6],[69,9,66,7],[69,10,66,8],[70,8,68,6],[70,12,68,10],[70,13,68,11,"response"],[70,21,68,19],[70,22,68,20,"ok"],[70,24,68,22],[70,26,68,24],[70,32,68,30],[70,36,68,34,"Error"],[70,41,68,39],[70,42,68,40],[70,66,68,64],[70,67,68,65],[71,8,70,6,"Alert"],[71,22,70,11],[71,23,70,12,"alert"],[71,28,70,17],[71,29,70,18],[71,38,70,27],[71,40,70,29],[71,71,70,60],[71,72,70,61],[72,8,71,6],[72,15,71,13],[72,19,71,17],[73,6,72,4],[73,7,72,5],[73,8,72,6],[73,15,72,13,"error"],[73,20,72,18],[73,22,72,20],[74,8,73,6,"console"],[74,15,73,13],[74,16,73,14,"error"],[74,21,73,19],[74,22,73,20],[74,45,73,43],[74,47,73,45,"error"],[74,52,73,50],[74,53,73,51],[75,8,74,6,"Alert"],[75,22,74,11],[75,23,74,12,"alert"],[75,28,74,17],[75,29,74,18],[75,36,74,25],[75,38,74,27],[75,62,74,51],[75,63,74,52],[76,8,75,6],[76,15,75,13],[76,20,75,18],[77,6,76,4],[78,4,77,2],[78,5,77,3],[79,4,79,2],[79,10,79,8,"saveVisitReport"],[79,25,79,23],[79,28,79,26],[79,34,79,33,"visitData"],[79,43,79,42],[79,47,79,47],[80,6,80,4],[80,10,80,8],[81,8,81,6],[81,14,81,12,"response"],[81,22,81,20],[81,25,81,23],[81,31,81,29,"fetch"],[81,36,81,34],[81,37,81,35],[81,57,81,55],[81,59,81,57],[82,10,82,8,"method"],[82,16,82,14],[82,18,82,16],[82,24,82,22],[83,10,83,8,"headers"],[83,17,83,15],[83,19,83,17],[84,12,83,19],[84,26,83,33],[84,28,83,35],[85,10,83,54],[85,11,83,55],[86,10,84,8,"body"],[86,14,84,12],[86,16,84,14,"JSON"],[86,20,84,18],[86,21,84,19,"stringify"],[86,30,84,28],[86,31,84,29,"visitData"],[86,40,84,38],[87,8,85,6],[87,9,85,7],[87,10,85,8],[88,8,87,6],[88,12,87,10],[88,13,87,11,"response"],[88,21,87,19],[88,22,87,20,"ok"],[88,24,87,22],[88,26,87,24],[88,32,87,30],[88,36,87,34,"Error"],[88,41,87,39],[88,42,87,40],[88,71,87,69],[88,72,87,70],[89,8,88,6],[89,15,88,13],[89,19,88,17],[90,6,89,4],[90,7,89,5],[90,8,89,6],[90,15,89,13,"error"],[90,20,89,18],[90,22,89,20],[91,8,90,6,"console"],[91,15,90,13],[91,16,90,14,"error"],[91,21,90,19],[91,22,90,20],[91,50,90,48],[91,52,90,50,"error"],[91,57,90,55],[91,58,90,56],[92,8,91,6,"Alert"],[92,22,91,11],[92,23,91,12,"alert"],[92,28,91,17],[92,29,91,18],[92,36,91,25],[92,38,91,27],[92,67,91,56],[92,68,91,57],[93,8,92,6],[93,15,92,13],[93,20,92,18],[94,6,93,4],[95,4,94,2],[95,5,94,3],[96,4,96,2],[96,11,96,9],[97,6,97,4,"requestLocationPermission"],[97,31,97,29],[98,6,98,4,"takePicture"],[98,17,98,15],[99,6,99,4,"savePayment"],[99,17,99,15],[100,6,100,4,"saveVisitReport"],[101,4,101,2],[101,5,101,3],[102,2,102,0],[103,0,102,1],[103,3]],"functionMap":{"names":["<global>","useVisitActions","requestLocationPermission","takePicture","savePayment","saveVisitReport"],"mappings":"AAA;OCG;oCCC;GDkB;sBEE;GFqB;sBGE;GH6B;0BIE;GJe;CDQ"}},"type":"js/module"}]}