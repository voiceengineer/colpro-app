{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"react-native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":37,"index":37}}],"key":"KyzuX10g6ixS9UfynhmjlvCIG3g=","exportNames":["*"],"imports":1}},{"name":"expo-location","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":38},"end":{"line":2,"column":42,"index":80}}],"key":"GNP7AGCKsBRUhlnTZ4lIPpbkT9E=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  exports.useVisitActions = useVisitActions;\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _reactNative = require(_dependencyMap[1], \"react-native\");\n  var _expoLocation = require(_dependencyMap[2], \"expo-location\");\n  var Location = _interopNamespace(_expoLocation);\n  function useVisitActions() {\n    var requestLocationPermission = /*#__PURE__*/function () {\n      var _ref = (0, _asyncToGenerator.default)(function* () {\n        try {\n          var _yield$Location$reque = yield Location.requestForegroundPermissionsAsync(),\n            status = _yield$Location$reque.status;\n          if (status === 'granted') {\n            var currentLocation = yield Location.getCurrentPositionAsync({});\n            return currentLocation.coords;\n          } else {\n            _reactNative.Alert.alert('Permission denied', 'Location permission is required for visit reports');\n            return null;\n          }\n        } catch (error) {\n          console.error('Error getting location:', error);\n          _reactNative.Alert.alert('Error', 'Failed to get current location');\n          return null;\n        }\n      });\n      return function requestLocationPermission() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    var takePicture = /*#__PURE__*/function () {\n      var _ref2 = (0, _asyncToGenerator.default)(function* (cameraRef, location, setLocation, setCapturedPhoto) {\n        if (!cameraRef.current) return;\n        try {\n          var photo = yield cameraRef.current.takePictureAsync({\n            quality: 0.8,\n            base64: false\n          });\n          setCapturedPhoto(photo);\n\n          // Get location when taking photo\n          if (!location) {\n            var coords = yield requestLocationPermission();\n            if (coords) {\n              setLocation(coords);\n            }\n          }\n        } catch (error) {\n          console.error('Error taking picture:', error);\n          _reactNative.Alert.alert('Error', 'Failed to take picture');\n        }\n      });\n      return function takePicture(_x, _x2, _x3, _x4) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    var savePayment = /*#__PURE__*/function () {\n      var _ref3 = (0, _asyncToGenerator.default)(function* (debtorId, paymentAmount, paymentMethod, paymentNotes) {\n        if (!paymentAmount || parseFloat(paymentAmount) <= 0) {\n          _reactNative.Alert.alert('Error', 'Please enter a valid payment amount');\n          return false;\n        }\n        try {\n          var response = yield fetch('/api/payment-history', {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n              debtor_id: debtorId,\n              amount: parseFloat(paymentAmount),\n              payment_date: new Date().toISOString().split('T')[0],\n              payment_method: paymentMethod,\n              notes: paymentNotes,\n              recorded_by: 'field_officer'\n            })\n          });\n          if (!response.ok) throw new Error('Failed to save payment');\n          _reactNative.Alert.alert('Success', 'Payment recorded successfully');\n          return true;\n        } catch (error) {\n          console.error('Error saving payment:', error);\n          _reactNative.Alert.alert('Error', 'Failed to save payment');\n          return false;\n        }\n      });\n      return function savePayment(_x5, _x6, _x7, _x8) {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n    var saveVisitReport = /*#__PURE__*/function () {\n      var _ref4 = (0, _asyncToGenerator.default)(function* (visitData) {\n        try {\n          var response = yield fetch('/api/visit-reports', {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(visitData)\n          });\n          if (!response.ok) throw new Error('Failed to save visit report');\n          return true;\n        } catch (error) {\n          console.error('Error saving visit report:', error);\n          _reactNative.Alert.alert('Error', 'Failed to save visit report');\n          return false;\n        }\n      });\n      return function saveVisitReport(_x9) {\n        return _ref4.apply(this, arguments);\n      };\n    }();\n    return {\n      requestLocationPermission,\n      takePicture,\n      savePayment,\n      saveVisitReport\n    };\n  }\n});","lineCount":145,"map":[[27,2,4,0,"exports"],[27,9,4,0],[27,10,4,0,"useVisitActions"],[27,25,4,0],[27,28,4,0,"useVisitActions"],[27,43,4,0],[28,2,102,1],[28,6,102,1,"_babelRuntimeHelpersAsyncToGenerator"],[28,42,102,1],[28,45,102,1,"require"],[28,52,102,1],[28,53,102,1,"_dependencyMap"],[28,67,102,1],[29,2,102,1],[29,6,102,1,"_asyncToGenerator"],[29,23,102,1],[29,26,102,1,"_interopDefault"],[29,41,102,1],[29,42,102,1,"_babelRuntimeHelpersAsyncToGenerator"],[29,78,102,1],[30,2,1,0],[30,6,1,0,"_reactNative"],[30,18,1,0],[30,21,1,0,"require"],[30,28,1,0],[30,29,1,0,"_dependencyMap"],[30,43,1,0],[31,2,2,0],[31,6,2,0,"_expoLocation"],[31,19,2,0],[31,22,2,0,"require"],[31,29,2,0],[31,30,2,0,"_dependencyMap"],[31,44,2,0],[32,2,2,0],[32,6,2,0,"Location"],[32,14,2,0],[32,17,2,0,"_interopNamespace"],[32,34,2,0],[32,35,2,0,"_expoLocation"],[32,48,2,0],[33,2,4,7],[33,11,4,16,"useVisitActions"],[33,26,4,31,"useVisitActions"],[33,27,4,31],[33,29,4,34],[34,4,5,2],[34,8,5,8,"requestLocationPermission"],[34,33,5,33],[35,6,5,33],[35,10,5,33,"_ref"],[35,14,5,33],[35,21,5,33,"_asyncToGenerator"],[35,38,5,33],[35,39,5,33,"default"],[35,46,5,33],[35,48,5,36],[35,61,5,48],[36,8,6,4],[36,12,6,8],[37,10,7,6],[37,14,7,6,"_yield$Location$reque"],[37,35,7,6],[37,44,7,31,"Location"],[37,52,7,39],[37,53,7,40,"requestForegroundPermissionsAsync"],[37,86,7,73],[37,87,7,74],[37,88,7,75],[38,12,7,14,"status"],[38,18,7,20],[38,21,7,20,"_yield$Location$reque"],[38,42,7,20],[38,43,7,14,"status"],[38,49,7,20],[39,10,8,6],[39,14,8,10,"status"],[39,20,8,16],[39,25,8,21],[39,34,8,30],[39,36,8,32],[40,12,9,8],[40,16,9,14,"currentLocation"],[40,31,9,29],[40,40,9,38,"Location"],[40,48,9,46],[40,49,9,47,"getCurrentPositionAsync"],[40,72,9,70],[40,73,9,71],[40,74,9,72],[40,75,9,73],[40,76,9,74],[41,12,10,8],[41,19,10,15,"currentLocation"],[41,34,10,30],[41,35,10,31,"coords"],[41,41,10,37],[42,10,11,6],[42,11,11,7],[42,17,11,13],[43,12,12,8,"Alert"],[43,24,12,13],[43,25,12,13,"Alert"],[43,30,12,13],[43,31,12,14,"alert"],[43,36,12,19],[43,37,13,10],[43,56,13,29],[43,58,14,10],[43,109,15,8],[43,110,15,9],[44,12,16,8],[44,19,16,15],[44,23,16,19],[45,10,17,6],[46,8,18,4],[46,9,18,5],[46,10,18,6],[46,17,18,13,"error"],[46,22,18,18],[46,24,18,20],[47,10,19,6,"console"],[47,17,19,13],[47,18,19,14,"error"],[47,23,19,19],[47,24,19,20],[47,49,19,45],[47,51,19,47,"error"],[47,56,19,52],[47,57,19,53],[48,10,20,6,"Alert"],[48,22,20,11],[48,23,20,11,"Alert"],[48,28,20,11],[48,29,20,12,"alert"],[48,34,20,17],[48,35,20,18],[48,42,20,25],[48,44,20,27],[48,76,20,59],[48,77,20,60],[49,10,21,6],[49,17,21,13],[49,21,21,17],[50,8,22,4],[51,6,23,2],[51,7,23,3],[52,6,23,3],[52,22,5,8,"requestLocationPermission"],[52,47,5,33,"requestLocationPermission"],[52,48,5,33],[53,8,5,33],[53,15,5,33,"_ref"],[53,19,5,33],[53,20,5,33,"apply"],[53,25,5,33],[53,32,5,33,"arguments"],[53,41,5,33],[54,6,5,33],[55,4,5,33],[55,7,23,3],[56,4,25,2],[56,8,25,8,"takePicture"],[56,19,25,19],[57,6,25,19],[57,10,25,19,"_ref2"],[57,15,25,19],[57,22,25,19,"_asyncToGenerator"],[57,39,25,19],[57,40,25,19,"default"],[57,47,25,19],[57,49,25,22],[57,60,25,29,"cameraRef"],[57,69,25,38],[57,71,25,40,"location"],[57,79,25,48],[57,81,25,50,"setLocation"],[57,92,25,61],[57,94,25,63,"setCapturedPhoto"],[57,110,25,79],[57,112,25,84],[58,8,26,4],[58,12,26,8],[58,13,26,9,"cameraRef"],[58,22,26,18],[58,23,26,19,"current"],[58,30,26,26],[58,32,26,28],[59,8,28,4],[59,12,28,8],[60,10,29,6],[60,14,29,12,"photo"],[60,19,29,17],[60,28,29,26,"cameraRef"],[60,37,29,35],[60,38,29,36,"current"],[60,45,29,43],[60,46,29,44,"takePictureAsync"],[60,62,29,60],[60,63,29,61],[61,12,30,8,"quality"],[61,19,30,15],[61,21,30,17],[61,24,30,20],[62,12,31,8,"base64"],[62,18,31,14],[62,20,31,16],[63,10,32,6],[63,11,32,7],[63,12,32,8],[64,10,33,6,"setCapturedPhoto"],[64,26,33,22],[64,27,33,23,"photo"],[64,32,33,28],[64,33,33,29],[66,10,35,6],[67,10,36,6],[67,14,36,10],[67,15,36,11,"location"],[67,23,36,19],[67,25,36,21],[68,12,37,8],[68,16,37,14,"coords"],[68,22,37,20],[68,31,37,29,"requestLocationPermission"],[68,56,37,54],[68,57,37,55],[68,58,37,56],[69,12,38,8],[69,16,38,12,"coords"],[69,22,38,18],[69,24,38,20],[70,14,39,10,"setLocation"],[70,25,39,21],[70,26,39,22,"coords"],[70,32,39,28],[70,33,39,29],[71,12,40,8],[72,10,41,6],[73,8,42,4],[73,9,42,5],[73,10,42,6],[73,17,42,13,"error"],[73,22,42,18],[73,24,42,20],[74,10,43,6,"console"],[74,17,43,13],[74,18,43,14,"error"],[74,23,43,19],[74,24,43,20],[74,47,43,43],[74,49,43,45,"error"],[74,54,43,50],[74,55,43,51],[75,10,44,6,"Alert"],[75,22,44,11],[75,23,44,11,"Alert"],[75,28,44,11],[75,29,44,12,"alert"],[75,34,44,17],[75,35,44,18],[75,42,44,25],[75,44,44,27],[75,68,44,51],[75,69,44,52],[76,8,45,4],[77,6,46,2],[77,7,46,3],[78,6,46,3],[78,22,25,8,"takePicture"],[78,33,25,19,"takePicture"],[78,34,25,19,"_x"],[78,36,25,19],[78,38,25,19,"_x2"],[78,41,25,19],[78,43,25,19,"_x3"],[78,46,25,19],[78,48,25,19,"_x4"],[78,51,25,19],[79,8,25,19],[79,15,25,19,"_ref2"],[79,20,25,19],[79,21,25,19,"apply"],[79,26,25,19],[79,33,25,19,"arguments"],[79,42,25,19],[80,6,25,19],[81,4,25,19],[81,7,46,3],[82,4,48,2],[82,8,48,8,"savePayment"],[82,19,48,19],[83,6,48,19],[83,10,48,19,"_ref3"],[83,15,48,19],[83,22,48,19,"_asyncToGenerator"],[83,39,48,19],[83,40,48,19,"default"],[83,47,48,19],[83,49,48,22],[83,60,48,29,"debtorId"],[83,68,48,37],[83,70,48,39,"paymentAmount"],[83,83,48,52],[83,85,48,54,"paymentMethod"],[83,98,48,67],[83,100,48,69,"paymentNotes"],[83,112,48,81],[83,114,48,86],[84,8,49,4],[84,12,49,8],[84,13,49,9,"paymentAmount"],[84,26,49,22],[84,30,49,26,"parseFloat"],[84,40,49,36],[84,41,49,37,"paymentAmount"],[84,54,49,50],[84,55,49,51],[84,59,49,55],[84,60,49,56],[84,62,49,58],[85,10,50,6,"Alert"],[85,22,50,11],[85,23,50,11,"Alert"],[85,28,50,11],[85,29,50,12,"alert"],[85,34,50,17],[85,35,50,18],[85,42,50,25],[85,44,50,27],[85,81,50,64],[85,82,50,65],[86,10,51,6],[86,17,51,13],[86,22,51,18],[87,8,52,4],[88,8,54,4],[88,12,54,8],[89,10,55,6],[89,14,55,12,"response"],[89,22,55,20],[89,31,55,29,"fetch"],[89,36,55,34],[89,37,55,35],[89,59,55,57],[89,61,55,59],[90,12,56,8,"method"],[90,18,56,14],[90,20,56,16],[90,26,56,22],[91,12,57,8,"headers"],[91,19,57,15],[91,21,57,17],[92,14,57,19],[92,28,57,33],[92,30,57,35],[93,12,57,54],[93,13,57,55],[94,12,58,8,"body"],[94,16,58,12],[94,18,58,14,"JSON"],[94,22,58,18],[94,23,58,19,"stringify"],[94,32,58,28],[94,33,58,29],[95,14,59,10,"debtor_id"],[95,23,59,19],[95,25,59,21,"debtorId"],[95,33,59,29],[96,14,60,10,"amount"],[96,20,60,16],[96,22,60,18,"parseFloat"],[96,32,60,28],[96,33,60,29,"paymentAmount"],[96,46,60,42],[96,47,60,43],[97,14,61,10,"payment_date"],[97,26,61,22],[97,28,61,24],[97,32,61,28,"Date"],[97,36,61,32],[97,37,61,33],[97,38,61,34],[97,39,61,35,"toISOString"],[97,50,61,46],[97,51,61,47],[97,52,61,48],[97,53,61,49,"split"],[97,58,61,54],[97,59,61,55],[97,62,61,58],[97,63,61,59],[97,64,61,60],[97,65,61,61],[97,66,61,62],[98,14,62,10,"payment_method"],[98,28,62,24],[98,30,62,26,"paymentMethod"],[98,43,62,39],[99,14,63,10,"notes"],[99,19,63,15],[99,21,63,17,"paymentNotes"],[99,33,63,29],[100,14,64,10,"recorded_by"],[100,25,64,21],[100,27,64,23],[101,12,65,8],[101,13,65,9],[102,10,66,6],[102,11,66,7],[102,12,66,8],[103,10,68,6],[103,14,68,10],[103,15,68,11,"response"],[103,23,68,19],[103,24,68,20,"ok"],[103,26,68,22],[103,28,68,24],[103,34,68,30],[103,38,68,34,"Error"],[103,43,68,39],[103,44,68,40],[103,68,68,64],[103,69,68,65],[104,10,70,6,"Alert"],[104,22,70,11],[104,23,70,11,"Alert"],[104,28,70,11],[104,29,70,12,"alert"],[104,34,70,17],[104,35,70,18],[104,44,70,27],[104,46,70,29],[104,77,70,60],[104,78,70,61],[105,10,71,6],[105,17,71,13],[105,21,71,17],[106,8,72,4],[106,9,72,5],[106,10,72,6],[106,17,72,13,"error"],[106,22,72,18],[106,24,72,20],[107,10,73,6,"console"],[107,17,73,13],[107,18,73,14,"error"],[107,23,73,19],[107,24,73,20],[107,47,73,43],[107,49,73,45,"error"],[107,54,73,50],[107,55,73,51],[108,10,74,6,"Alert"],[108,22,74,11],[108,23,74,11,"Alert"],[108,28,74,11],[108,29,74,12,"alert"],[108,34,74,17],[108,35,74,18],[108,42,74,25],[108,44,74,27],[108,68,74,51],[108,69,74,52],[109,10,75,6],[109,17,75,13],[109,22,75,18],[110,8,76,4],[111,6,77,2],[111,7,77,3],[112,6,77,3],[112,22,48,8,"savePayment"],[112,33,48,19,"savePayment"],[112,34,48,19,"_x5"],[112,37,48,19],[112,39,48,19,"_x6"],[112,42,48,19],[112,44,48,19,"_x7"],[112,47,48,19],[112,49,48,19,"_x8"],[112,52,48,19],[113,8,48,19],[113,15,48,19,"_ref3"],[113,20,48,19],[113,21,48,19,"apply"],[113,26,48,19],[113,33,48,19,"arguments"],[113,42,48,19],[114,6,48,19],[115,4,48,19],[115,7,77,3],[116,4,79,2],[116,8,79,8,"saveVisitReport"],[116,23,79,23],[117,6,79,23],[117,10,79,23,"_ref4"],[117,15,79,23],[117,22,79,23,"_asyncToGenerator"],[117,39,79,23],[117,40,79,23,"default"],[117,47,79,23],[117,49,79,26],[117,60,79,33,"visitData"],[117,69,79,42],[117,71,79,47],[118,8,80,4],[118,12,80,8],[119,10,81,6],[119,14,81,12,"response"],[119,22,81,20],[119,31,81,29,"fetch"],[119,36,81,34],[119,37,81,35],[119,57,81,55],[119,59,81,57],[120,12,82,8,"method"],[120,18,82,14],[120,20,82,16],[120,26,82,22],[121,12,83,8,"headers"],[121,19,83,15],[121,21,83,17],[122,14,83,19],[122,28,83,33],[122,30,83,35],[123,12,83,54],[123,13,83,55],[124,12,84,8,"body"],[124,16,84,12],[124,18,84,14,"JSON"],[124,22,84,18],[124,23,84,19,"stringify"],[124,32,84,28],[124,33,84,29,"visitData"],[124,42,84,38],[125,10,85,6],[125,11,85,7],[125,12,85,8],[126,10,87,6],[126,14,87,10],[126,15,87,11,"response"],[126,23,87,19],[126,24,87,20,"ok"],[126,26,87,22],[126,28,87,24],[126,34,87,30],[126,38,87,34,"Error"],[126,43,87,39],[126,44,87,40],[126,73,87,69],[126,74,87,70],[127,10,88,6],[127,17,88,13],[127,21,88,17],[128,8,89,4],[128,9,89,5],[128,10,89,6],[128,17,89,13,"error"],[128,22,89,18],[128,24,89,20],[129,10,90,6,"console"],[129,17,90,13],[129,18,90,14,"error"],[129,23,90,19],[129,24,90,20],[129,52,90,48],[129,54,90,50,"error"],[129,59,90,55],[129,60,90,56],[130,10,91,6,"Alert"],[130,22,91,11],[130,23,91,11,"Alert"],[130,28,91,11],[130,29,91,12,"alert"],[130,34,91,17],[130,35,91,18],[130,42,91,25],[130,44,91,27],[130,73,91,56],[130,74,91,57],[131,10,92,6],[131,17,92,13],[131,22,92,18],[132,8,93,4],[133,6,94,2],[133,7,94,3],[134,6,94,3],[134,22,79,8,"saveVisitReport"],[134,37,79,23,"saveVisitReport"],[134,38,79,23,"_x9"],[134,41,79,23],[135,8,79,23],[135,15,79,23,"_ref4"],[135,20,79,23],[135,21,79,23,"apply"],[135,26,79,23],[135,33,79,23,"arguments"],[135,42,79,23],[136,6,79,23],[137,4,79,23],[137,7,94,3],[138,4,96,2],[138,11,96,9],[139,6,97,4,"requestLocationPermission"],[139,31,97,29],[140,6,98,4,"takePicture"],[140,17,98,15],[141,6,99,4,"savePayment"],[141,17,99,15],[142,6,100,4,"saveVisitReport"],[143,4,101,2],[143,5,101,3],[144,2,102,0],[145,0,102,1],[145,3]],"functionMap":{"names":["<global>","useVisitActions","requestLocationPermission","takePicture","savePayment","saveVisitReport"],"mappings":"AAA;OCG;oCCC;GDkB;sBEE;GFqB;sBGE;GH6B;0BIE;GJe;CDQ"},"hasCjsExports":false},"type":"js/module"}]}